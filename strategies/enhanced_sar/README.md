# 增强版SAR策略

## 📊 策略概述

增强版SAR策略是基于抛物线SAR指标的合约交易策略，支持做多做空、止盈止损功能。

## 🎯 策略特点

- **合约交易**: 使用BTC-USDT-SWAP合约交易对
- **杠杆交易**: 2倍杠杆，可自定义
- **双向交易**: 支持做多和做空
- **止盈止损**: 完整的风险管理机制
- **多重过滤**: 趋势、波动率、成交量过滤器
- **固定投资**: 1000 USDT固定投资金额

## ⚙️ 策略参数

### 投资配置
- **初始资金**: 1000 USDT
- **杠杆倍数**: 2倍
- **交易对**: BTC-USDT-SWAP

### SAR参数
- **初始加速因子**: 0.02
- **加速因子增量**: 0.02
- **最大加速因子**: 0.2

### 风险管理
- **止盈比例**: 2%
- **止损比例**: 1%
- **ATR周期**: 14

### 过滤器
- **成交量阈值**: 0.0 (已禁用)
- **波动率阈值**: 0.8
- **趋势确认**: 1小时线

## 🚀 运行方式

### 直接运行
```bash
cd strategies/enhanced_sar
python3 strategy.py
```

### 通过策略管理器
```bash
python3 strategy_manager.py
# 选择 "运行增强版SAR策略"
```

### 配置修改
编辑 `config.json` 文件来修改策略参数：

```json
{
  "investment": {
    "initial_usdt": 1000,  // 修改投资金额
    "leverage": 2          // 修改杠杆倍数
  },
  "sar_params": {
    "af_start": 0.02,      // 修改SAR参数
    "af_increment": 0.02,
    "af_maximum": 0.2
  }
}
```

## 📈 策略逻辑

### 开仓条件
1. **SAR突破信号**: 价格突破SAR指标
2. **趋势确认**: 1小时线趋势与信号一致
3. **波动率过滤**: 市场波动率足够
4. **成交量确认**: 成交量满足要求

### 平仓条件
1. **SAR反转**: SAR指标反转
2. **止盈触发**: 盈利达到设定比例
3. **止损触发**: 亏损达到设定比例

### 风险控制
- 固定1000 USDT投资，不追加资金
- 2倍杠杆，控制风险敞口
- 多重过滤器，减少假信号
- 止盈止损，保护利润和限制亏损

## 📊 报告生成

策略运行后会生成详细的报告，包括：
- 策略参数信息
- 性能指标
- 交易历史
- 持仓状态

报告保存在 `reports/` 目录下。

## ⚠️ 注意事项

1. **风险提示**: 合约交易风险较高，请谨慎操作
2. **资金管理**: 建议使用闲置资金进行测试
3. **参数调整**: 可根据市场情况调整策略参数
4. **监控运行**: 建议定期检查策略运行状态
